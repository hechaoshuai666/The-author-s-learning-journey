# Linux基础命令

## 查找命令和实用快捷键

+ 自动补全

  tab,一次不显示再按一次

+ which

  查找命令所在的目录,每一个指令都是一个可执行程序

+ 查找命令

  + ctrl + r: 输入要查找的命令,回车即可
  + history: 显示所有使用过的命令,对应着行号,可用!+ 行号执行对应的命令

+ 操作快捷键

  ```bash
  ctrl + u 删除光标左边的内容
  ctrl + k 删除光标右边的内容
  ctrl + a 光标回到首行
  ctrl + e 光标回到末尾
  ctrl + l 清除屏幕
  ctrl + w 向左边删除一个单词
  ctrl + y 复制
  ctrl + d 结束符
  上下键可以回退到使用过的命令
  ```

## 文件和目录组织

linux下的文件目录结构和windows的不同

首先linux最顶级的目录是/,其下分别

![](https://img2020.cnblogs.com/blog/1885265/202010/1885265-20201006155346858-744034829.png)

解释下常用的目录意思

```bash
bin 二进制文件,存放一些启动文件
dev 设备之类的文件
home 如果不是root用户,默认创建的用户都在home下面,linux是多用户管理
lib64 存放64位类库,例如一些so之类的
media 媒体资源
opt 第三方应用软件资源
root root用户所在的家目录
sbin 系统二进制文件
boot 启动文件
etc 配置文件
mnt 挂载文件
tmp 临时存放文件
var 变量数据文件 用于存放一些日志
```

## 浏览和切换目录

+ ls  查看目录下的文件信息

  ```bash
  不加参数, 默认只显示当前目录下的文件信息
  而且ls默认做了颜色处理, 相当于ls == ls --color=auto
  具体颜色所代表的含义就不一一列出
  -a 显示隐藏文件
  -l 以列状的形式返回文件信息
  -h 文件的大小以人类可读的形式返回
  -t 按照文件最新修改的时间排序
  -A 不显示. .. 这两个文件信息
  ```

+ cd 切换文件所在目录

  ```bash
  cd + 文件目录
  文件目录可分为相对路径和绝对路径
  .表示当前路径, ..表示上一级路径
  cd 不加参数,默认回到家路径
  ```

## 目录大小

+ du(disk usage)

  ```bash
  du + 文件目录  默认只计算文件夹的大小
  du -a 计算文件和文件夹的大小
  du -h 以人类可读的方式返回文件大小
  du -s 计算总和,不显示单个的文件大小
  ```

## 查看文件内容和创建文件

+ cat(一次性显示文件的内容,适用于小的文件)

  + -n 显示行号
  + 可以作用多个文件,用空格隔开

+ less(分多次展开文件内容)

  + 空格键: 下一页
  + b键 : 上一页
  + 回车键 : 下一行
  + y键 : 后退一行
  + d键 : 前进半页
  + u键 : 后退半页
  + q键 : 停止读取

  高级用法

  + = 显示你在文件的什么位置

    ![](https://img2020.cnblogs.com/blog/1885265/202010/1885265-20201006162039303-1884807757.png)

    + 会显示当前页面的内容是文件中的第几行到第几行
    + 整个文件所含行数,所含字符数, 所有的字符数

  + h键 : 查找帮助, q 键退出帮助文档

  + / : 进入搜索模式 ,按下回车

    + n : 向下查找内容
    + N : 向上查找内容
    + 也可用正则表达式

+ head

  显示文件的头部信息,默认显示头10行

  + -n 指定显示的行数

+ tail

  显示文件的尾部信息,默认显示10行

  + -n 指定显示的行数
  + -f 实时追踪文件的内容(默认每一秒检查文件是否有新内容,可用-s 指定检查时间,单位为s)
  + ctrl + c 终止操作

+ touch

  + 当touch的文件不存在时,会创建新的空白文件
  + 存在时,则修改操作时间

+ mkdir(创建目录)

  + -p 递归的创建文件目录

## 文件的复制和移动操作

+ cp(文件复制)

  格式 : cp 源文件 目标文件

  + -r 递归的复制文件目录
  + *通配符, *.txt表示匹配所有的.txt文件

+ mv(移动文件)

  格式 : mv 源文件 目标文件

  + 可以重命名
  + 移动文件夹时,不需要-r

## 文件的删除和链接

+ rm(删除文件)

  + -r 递归的删除文件目录
  + -f 强制删除文件
  + -i 以通知的形式删除文件

+ ln(创建链接)

  ln创建链接分为两种,一种硬链接,一种软链接

  创建格式: ln 源文件 目标文件

  + 硬链接

    + 相当于两个文件拥有同一个inode,删除任何一个对另一个都没有影响
    + 不能指向目录

  + 软链接

    ln -s

    + 相当于windows的快捷方式,删除源文件对目标文件有影响,反过来不会
    + 可以指向目录

## 用户和权限

+ root操作

  + sudo: 临时切换root权限,只是为单个命令加上root权限
  + sudo su : 切换到root用户,此时输入的密码为正在登录的用户密码
  + su : 切换root用户, 密码为root密码
  + su - : 切换root用户 ,会回到root的家目录

+ 新增用户

  格式(必须在root权限下操作)

  + useradd  用户名

  此时只是新增了用户,还需要我们设置密码

  格式

  + passwd 用户名

  输入两遍密码即可

+ 删除用户

  格式

  + userdel 用户名

    ```bash
    默认不加参数,只是会删除用户名,而家目录还在
    要想讲家目录一起删除,则需要加上-r or --remove
    ```

## 群组管理和文件权限管理

linux中每一个用户都会属于一个特定的群组

如果你不设置用户的群组,默认会创建一个和它的用户名一样的群组

+ 添加群组

  + groupadd 群组名

+ 修改用户

  + usermod

    ```bash
    -l 修改用户的用户名
    -g 修改用户所在的群组
    # for example 
    usermod -g new_group origin_group
    -G 一次性添加多个群组,群组之间以逗号隔开
    # 无论是G还是g,默认都会将原先的群组踢掉,加入新的群组
    # 想要保留,则需要加上-a,注意-a只能跟上G
    ```

+ 查看用户所在的群组

  + groups

    ```bash
    groups username
    # 不加的话,默认是查看当前用户
    ```

+ 删除群组

  + groupdel

+ 更换所有者

  + chown

    ```bash
    # 默认一个文件的拥有者和群组都是它自身,要想修改
    # chown to_own file ,该操作要在root权限下
    默认只会修改owner
    
    还可以一次性修改owner和group
    如 chown to_owner:to_group file
    -R 递归的修改权限
    ```

+ 更换群组

  + chgrp

    ```bash
    # chgrp to_group file
    ```

+ 修改文件权限

  **重头戏来了**

  ![](https://img2020.cnblogs.com/blog/1885265/202010/1885265-20201006194104482-52184313.png)

  首先文件权限分为五部分

  + 文件类型,d为目录,l为链接,-为普通文件
  + 第一组rwx为所有者的权限
  + 第二组rwx为所有组的权限
  + 第三组rwx为其它人的权限
  + 最后一个点表示linux安全策略

+ chmod(不需要root权限)

  最常用的数字法

  r : 4 , w : 2 , x: 1

  ```bash
  chmod 600 file 
  解读 : 给当前文件所有者执行读写操作,其它群组和用户没法操作
  -R 递归的修改权限
  ```


## 查找文件

+ find

  格式: find 何处 何物 做什么

  ```bash
  # 只有何物是必须的
  # 何处如果不填写 默认是以当前目录和子目录查找
  # 做什么,如果不指定的话 默认只是找到文件
  ```

  + 基本用法

    find -name file_name

  ```bash
  # 以当前路径和子路径查找文件名为file_name的文件
  ```

  + 根据大小查找

    find -size +10M : 查找大于10M的文件

    大于用+ , 小于用-

  + 根据访问时间

    find -atime -7  : 访问7天之内的文件

  + 根据文件类型

     find -type d|f : d为目录,f为文件

  + 高级用法

    + -printf
    + -delete
    + -exec

