## Git分支的了解

### 1. 分支的作用

首先来了解下为什么要有分支,前面已经了解过Git的工作流程

假设我们此时正在研发新功能,但之前的代码出现了bug,如果想及时

修复bug,我们得git reset回去,那我们辛辛苦苦写的新功能岂不是没了

但有了branch(分支),一切都变的简单起来

### 2. 分支的常用命令

+ 查看分支

  ```bash
  git branch # 默认初始化仓库,只有一个master分支
  ```

+ 创建分支

  ```bash
  git branch 分支名
  ```

+ 切换分支

  ```bash
  git checkout 分支名
  ```

+ 上面两步合并步骤

  ```bash
  git checkout -b 分支名
  ```

+ 分支合并(可能会出现冲突)

  ```bash
  git merge 分支名
  
  注:切换分支再合并
  ```

+ 删除分支

  ```bash
  git branch -d 分支名
  ```

### 3. 工作流

一般情况下,一个项目最好要有两个及以上的分支(分支又不要钱)

通常分支取名及作用

+ master(线上运行代码,最稳定的)
+ dev(开发环境)
+ bug(修复bug)
+ ......

![img](https://images2017.cnblogs.com/blog/425762/201708/425762-20170811152733617-1247689823.png)

![img](https://images2017.cnblogs.com/blog/425762/201708/425762-20170811163633632-1586077696.png)

Git在保存修改状态的时候,并不是完完全全复制一份,而是只保存修改的部分,用类似指针的方式指向上一次的工作状态,节省了空间



简单的描述下上图的工作流程吧

+ 首先创建一个dev分支(或者在已有的稳定代码上创建dev)
+ 保证master分支上是最稳定的代码
+ 如果master上的代码出现了bug(可以在master当前的节点上创建bug分支)
+ 在bug分支上修改代码
+ 修改好之后,切换到master分支,合并bug分支,因为bug分支只保留了修改后的结果,一般不会出现冲突,产生冲突需要自己手动调整
+ 此时的dev分支还是之前有bug的master代码,所以merge bug或者master都可以,确保dev分支中的代码没bug,删除bug分支,可选可不选,
+ 等dev分支中的功能开发完毕,切换master分支,merge dev分支